{% extends "base.html" %}

{% block title %} 會議資料 {% endblock %}

{% block content%}
<!-- 會議 -->
<br>
<h1>會議資料</h1>
<br>
<br>
<div class="row">
    <div class="col-md-6">
        <span class="info-text">會議名稱</span>
    </div>
    <div class="col-md-6">
        <p class="info-text">{{ meeting.name|safe }}</p>
    </div>
</div>
<div class="row">
    <div class="col-md-6">
        <span class="info-text">種類</span>
    </div>
    <div class="col-md-6">
        <p class="info-text">{{ meeting.get_meeting_type|safe }}</p>
    </div>
</div>
<div class="row">
    <div class="col-md-6">
        <span class="info-text">時間</span>
    </div>
    <div class="col-md-6">
        <p class="info-text">{{ meeting.date }}</p>
    </div>
</div>
<div class="row">
    <div class="col-md-6">
        <span class="info-text">地點</span>
    </div>
    <div class="col-md-6">
        <p class="info-text">{{ meeting.location|safe }}</p>
    </div>
</div>
<div class="row">
    <div class="col-md-6">
        <span class="info-text">主席</span>
    </div>
    <div class="col-md-6">
        <p class="info-text">{{ meeting.chairman|safe }}</p>
    </div>
</div>
<div class="row">
    <div class="col-md-6">
        <span class="info-text">記錄人員</span>
    </div>
    <div class="col-md-6">
        <p class="info-text">{{ meeting.minutes_taker|safe }}</p>
    </div>
</div>
<div class="row">
    <div class="col-md-6">
        <span class="info-text">與會人員</span>
    </div>
    <div class="col-md-6">
        <p class="info-text"><a href="{% url 'meeting-participants' meeting.id %}">點此觀看名單</a></p>
    </div>
</div>
<div class="row">
    <div class="col-md-6">
        <span class="info-text">出席名單</span>
    </div>
    <div class="col-md-6">
        {% if meeting.meeting_begins %}
        <p class="info-text"><a href="{% url 'edit-attendance' meeting.id %}">點此觀看名單</a></p>
        {% else %}
        <p class="info-text"><a href="{% url 'meeting-not-begin' %}">點此觀看名單</a></p>
        {% endif %}
    </div>
</div>
<div class="row">
    <div class="col-md-6">
        <span class="info-text">修改請求</span>
    </div>
    <div class="col-md-6">
        <p class="info-text"><a href="{% url 'request-list' meeting.id %}">點此觀看</a></p>
    </div>
</div>
<div class="row">
    <div class="col-md-6">
        <span class="info-text">主席致詞</span>
    </div>
    <div class="col-md-6">
        <p class="info-text">{{ meeting.speech|safe }}</p>
    </div>
</div>

<!-- 報告事項 -->
<br>
<h1>報告事項</h1>
<br>
<br>

<div class="accordion" id="announcement-accordion">
    <!-- 有東西才顯示 -->
    {% if announcements %}
    {% for announcement in announcements %}
    <div class="item">
        <div class="item-header" id="accnouncement-heading{{ forloop.counter }}">
            <h2 class="mb-0">
                <button class="btn btn-link" type="button" data-toggle="collapse"
                    data-target="#accnouncement-collapse{{ forloop.counter }}" aria-expanded="true"
                    aria-controls="accnouncement-collapse{{ forloop.counter }}">
                    報告事項 {{ forloop.counter }}
                    <i class="fa fa-angle-down"></i>
                </button>
            </h2>
        </div>
        <div id="accnouncement-collapse{{ forloop.counter }}" class="collapse"
            aria-labelledby="accnouncement-heading{{ forloop.counter }}" data-parent="#announcement-accordion">
            <div class="t-p">
                <p class="info-text">{{ announcement.content }}</p>
            </div>
        </div>
    </div>
    {% endfor %}
    {% else %}
    <div class="row">
        <div class="col-md-12">
            <span class="info-text">目前沒有報告事項</span>
        </div>
    </div>
    {% endif %}
</div>

<!-- 挑論事項 -->
<br>
<br>
<h1>討論事項</h1>
<br>
<br>
<div class="accordion" id="discussion-accordion">
    <!-- 一定會有討論事項，所以不檢查 -->
    {% for discussion in discussions %}
    <div class="item">
        <div class="item-header" id="discussion-heading{{ forloop.counter }}">
            <h2 class="mb-0">
                <button class="btn btn-link" type="button" data-toggle="collapse"
                    data-target="#discussion-collapse{{ forloop.counter }}" aria-expanded="true"
                    aria-controls="discussion-collapse{{ forloop.counter }}">
                    討論事項 {{ forloop.counter }}
                    <i class="fa fa-angle-down"></i>
                </button>
            </h2>
        </div>
        <div id="discussion-collapse{{ forloop.counter }}" class="collapse"
            aria-labelledby="discussion-heading{{ forloop.counter }}" data-parent="#discussion-accordion">
            <div class="t-p">
                <div class="col-md-12">
                    <span class="info-text">案由</span>
                </div>
                <div class="col-md-12">
                    <p class="info-text">{{ discussion.topic }}</p>
                </div>
            </div>
            <div class="t-p">
                <div class="col-md-12">
                    <span class="info-text">說明</span>
                </div>
                <div class="col-md-12">
                    <p class="info-text">{{ discussion.description }}</p>
                </div>
            </div>
            <div class="t-p">
                <div class="col-md-12">
                    <span class="info-text">決議</span>
                </div>
                <div class="col-md-12">
                    <p class="info-text">{{ discussion.resolution }}</p>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

<!-- 臨時動議 -->
<br>
<br>
<h1>臨時動議</h1>
<br>
<br>
<div class="accordion" id="extempore-motion-accordion">
    {% if extempore_motions %}
    {% for extempore_motion in extempore_motions %}
    <div class="item">
        <div class="item-header" id="extempore-motion-heading{{ forloop.counter }}">
            <h2 class="mb-0">
                <button class="btn btn-link" type="button" data-toggle="collapse"
                    data-target="#extempore-motion-collapse{{ forloop.counter }}" aria-expanded="true"
                    aria-controls="extempore-motion-collapse{{ forloop.counter }}">
                    臨時動議 {{ forloop.counter }}
                    <i class="fa fa-angle-down"></i>
                </button>
            </h2>
        </div>
        <div id="extempore-motion-collapse{{ forloop.counter }}" class="collapse"
            aria-labelledby="extempore-motion-heading{{ forloop.counter }}" data-parent="#extempore-motion-accordion">
            <div class="t-p">
                <div class="row">
                    <div class="col-md-6">
                        <span class="info-text">提案人</span>
                    </div>
                    <div class="col-md-6">
                        <p class="info-text">{{ extempore_motion.proposer }}</p>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <span class="info-text">內容</span>
                    </div>
                    <div class="col-md-6">
                        <p class="info-text">{{ extempore_motion.content }}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
    {% else %}
    <span class="info-text">目前沒有臨時動議</span>
    {% endif %}
</div>

<!-- 附件 -->
<br>
<br>
<h1>附件</h1>
<br>
<br>
<div class="accordion" id="appendix-accordion">
    {% if appendices %}
    {% for appendix in appendices %}
    <div class="item">
        <div class="item-header" id="appendix-heading{{ forloop.counter }}">
            <h2 class="mb-0">
                <button class="btn btn-link" type="button" data-toggle="collapse"
                    data-target="#appendix-collapse{{ forloop.counter }}" aria-expanded="true"
                    aria-controls="appendix-collapse{{ forloop.counter }}">
                    附件 {{ forloop.counter }}
                    <i class="fa fa-angle-down"></i>
                </button>
            </h2>
        </div>
        <div id="appendix-collapse{{ forloop.counter }}" class="collapse"
            aria-labelledby="appendix-heading{{ forloop.counter }}" data-parent="#appendix-accordion">
            <div class="t-p">
                <div class="row">
                    <div class="col-md-6">
                        <span class="info-text">提供者</span>
                    </div>
                    <div class="col-md-6">
                        <p class="info-text">{{ appendix.provider }}</p>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <span class="info-text">檔案</span>
                    </div>
                    <div class="col-md-6">
                        <p class="info-text"><a href="{{ appendix.file.url }}" download>{{ appendix.get_file_name }}</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
    {% else %}
    <span class="info-text">目前沒有附件</span>
    {% endif %}
</div>
{% endblock %}